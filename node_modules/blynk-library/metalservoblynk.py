import RPi.GPIO as GPIO
import BlynkLib
import time

GPIO.setmode(GPIO.BCM)
GPIO.setwarnings(False)
GPIO.setup(21, GPIO.OUT)

p=GPIO.PWM(21,50)
p.start(7.5)

auth_token = 'J-SxhZwLTIsqQw4_waiQQJcqfNnSAY3c'

# Initialize Blynk

blynk = BlynkLib.Blynk(auth_token)

@blynk.handle_event('write V0')
def write_handler_pin_handler(pin, value):
    Doorlock = (format(value[0]))
    if Doorlock =="0":
        p.ChangeDutyCycle(12.5)
        print("Door Locked")
    elif Doorlock =="1":
        p.ChangeDutyCycle(7.5)
        print("Door Unlocked")
try:
    while True:
        blynk.run()

except KeyboardInterrupt:
    print("Quit")

# Reset GPIO settings
GPIO.cleanup()